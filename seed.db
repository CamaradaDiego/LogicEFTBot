-- Initialize the db with all of the tables needed to run the app.

DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS channels;
DROP TABLE IF EXISTS bot_logging;

CREATE TABLE `users` (
  `twitch_id` varchar(255) NOT NULL,
  `username` varchar(255) NOT NULL,
  `display_name` varchar(255) NOT NULL,
  `access_token` varchar(255) NOT NULL,
  `refresh_token` varchar(255) NOT NULL,
  `created_on` varchar(255) NOT NULL,
  `lang` varchar(255) NOT NULL DEFAULT 'en'
  PRIMARY KEY (`twitch_id`)
) DEFAULT CHARSET=utf8mb4;

CREATE TABLE `channels` (
  `name` varchar(255) NOT NULL,
  `cooldown` int(11) NOT NULL DEFAULT '10',
  `lang` varchar(255) NOT NULL DEFAULT 'en'
) DEFAULT CHARSET=utf8mb4;

CREATE TABLE `bot_logging` (
	`id` ENUM(255) NOT NULL,
	`timestamp` TIMESTAMP NOT NULL,
	`source` TEXT(255) NOT NULL,
	`channel` TEXT(25) NOT NULL,
	`search_type` TEXT(11) NOT NULL,
	`query` TEXT(255) NOT NULL,
	PRIMARY KEY (`enum`)
) DEFAULT CHARSET=utf8mb4;

-- some sample data
INSERT INTO channels VALUES ("#pawn_star", 10, "en");
